{% extends 'results_base_custom.html' %}
{% block body %}
    {% block title %}
    <h3>Test: {{ test_name }}</h3>
    {% endblock %}
    <h3>
        <span>Test start time: </span>
        <span class="blue">{{ test_details.pop('start_time') }}</span>
        <br>
        <span>Scylla Server Version: </span>
        <span class="blue">{{ test_details.pop('scylla_version') }}</span>
    </h3>
    <div>
        <span> Setup Details: </span>
        <ul>
        {% for key, val in test_details.items()%}
            <li>
                {{ key }}: <span class="blue"> {{ val }} </span>
            </li>
        {% endfor %}
        </ul>
    </div>
    <div>
        <h3>Latency 95th percintile</h3>
        <table id="results_table">
            <th> Operation per seconds (KOps) </th>
            <th> AVG (ms) </th>
            <th> MAX (ms) </th>
            {% if "latency 95th percentile read" in stats[0] %}
                <th> READ AVG (ms) </th>
            {% endif %}
            {% if "latency 95th percentile read max" in stats[0] %}
                <th> READ MAX (ms) </th>
            {% endif %}
            {% if "latency 95th percentile write" in stats[0] %}
                <th> WRITE (ms) </th>
            {% endif %}

            {% for round_stat in stats %}
            <tr>
                <td>{{ round_stat['ops'] }}</td>
                <td>{{ round_stat['latency 95th percentile'] }}</td>
                {% if "latency 95th percentile read" in round_stat %}
                    <td>{{ round_stat['latency 95th percentile read'] }}</td>
                {% endif %}
                <td>{{ round_stat['latency 95th percentile max'] }}</td>
                {% if "latency 95th percentile read max" in round_stat %}
                    <td>{{ round_stat['latency 95th percentile read max'] }}</td>
                {% endif %}
                {% if "latency 95th percentile write" in round_stat %}
                    <td>{{ round_stat['latency 95th percentile write'] }}</td>
                {% endif %}

            </tr>
            {% endfor %}
        </table>

    </div>
    <div>
        <h3>Latency 99th percintile</h3>
        <table id="results_table">
            <th> Operation per seconds (KOps) </th>
            <th> AVG (ms) </th>
            <th> MAX (ms) </th>
            {% if "latency 99th percentile read" in stats[0] %}
                <th> READ AVG (ms) </th>
            {% endif %}
            {% if "latency 99th percentile read max" in stats[0] %}
                <th> READ MAX (ms) </th>
            {% endif %}

            {% for round_stat in stats %}
            <tr>
                <td>{{ round_stat['ops'] }}</td>
                <td>{{ round_stat['latency 99th percentile'] }}</td>
                {% if "latency 99th percentile read" in round_stat %}
                    <td>{{ round_stat['latency 99th percentile read'] }}</td>
                {% endif %}
                <td>{{ round_stat['latency 99th percentile max'] }}</td>
                {% if "latency 95th percentile read max" in round_stat %}
                    <td>{{ round_stat['latency 99th percentile read max'] }}</td>
                {% endif %}

            </tr>
            {% endfor %}
        </table>

    </div>
<!--    <div>-->
<!--        <table id="results_table">-->
<!--            <th> Operation per seconds (KOps) </th>-->
<!--            <th> Latency 95th percintile avg (ms) </th>-->
<!--            <th> Latency 95th percintile max (ms) </th>-->
<!--            <th> Latency 99th percintile avg (ms) </th>-->
<!--            <th> Latency 99th percintile max (ms) </th>-->
<!--            {% if "latency 95th percentile read" in stats[0] %}-->
<!--                <th> Latency 95th percintile read avg (ms) </th>-->
<!--            {% endif %}-->
<!--            {% if "latency 95th percentile read max" in stats[0] %}-->
<!--                <th> Latency 95th percintile read max (ms) </th>-->
<!--            {% endif %}-->
<!--            {% if "latency 99th percentile read" in stats[0] %}-->
<!--                <th> Latency 99th percintile read avg (ms) </th>-->
<!--            {% endif %}-->
<!--            {% if "latency 99th percentile read max" in stats[0] %}-->
<!--                <th> Latency 99th percintile read max (ms) </th>-->
<!--            {% endif %}-->
<!--            {% if "latency 95th percentile write" in stats[0] %}-->
<!--                <th> Latency 95th percintile write (ms) </th>-->
<!--            {% endif %}-->

<!--            {% for round_stat in stats %}-->
<!--            <tr>-->
<!--                <td>{{ round_stat['ops'] }}</td>-->
<!--                <td>{{ round_stat['latency 95th percentile'] }}</td>-->
<!--                {% if "latency 95th percentile read" in round_stat %}-->
<!--                    <td>{{ round_stat['latency 95th percentile read'] }}</td>-->
<!--                {% endif %}-->
<!--                <td>{{ round_stat['latency 95th percentile max'] }}</td>-->
<!--                {% if "latency 95th percentile read max" in round_stat %}-->
<!--                    <td>{{ round_stat['latency 95th percentile read max'] }}</td>-->
<!--                {% endif %}-->
<!--                <td>{{ round_stat['latency 99th percentile'] }}</td>-->
<!--                {% if "latency 99th percentile read" in round_stat %}-->
<!--                    <td>{{ round_stat['latency 99th percentile read'] }}</td>-->
<!--                {% endif %}-->
<!--                <td>{{ round_stat['latency 99th percentile max'] }}</td>-->
<!--                {% if "latency 95th percentile read max" in round_stat %}-->
<!--                    <td>{{ round_stat['latency 99th percentile read max'] }}</td>-->
<!--                {% endif %}-->
<!--                {% if "latency 95th percentile write" in round_stat %}-->
<!--                    <td>{{ round_stat['latency 95th percentile write'] }}</td>-->
<!--                {% endif %}-->

<!--            </tr>-->
<!--            {% endfor %}-->
<!--        </table>-->

<!--    </div>-->
    <div>
        {% if screenshots %}
            <h3>Grafana Screenshots:</h3>
            {% for screenshot in screenshots %}
                <img src="{{ screenshot }}"  height="50%" width="50%">
            {% endfor %}
        {% endif %}
    </div>
{% endblock %}
